<mxfile host="app.diagrams.net" modified="2026-01-16" agent="Claude" version="22.1.0">
  <diagram name="Class Diagram - Interfaces &amp; Manager Layer" id="classinterface">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="800" background="#ffffff">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Title -->
        <mxCell id="title" value="Class Diagram: Interfaces &amp; Manager Layer (BCE Pattern)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="300" y="10" width="500" height="30" as="geometry"/>
        </mxCell>
        
        <!-- IManageable Interface -->
        <mxCell id="imanageable" value="&lt;&lt;interface&gt;&gt;&#xa;IManageable&lt;T&gt;" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="60" y="60" width="220" height="150" as="geometry"/>
        </mxCell>
        <mxCell id="imanageableLine" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="imanageable" vertex="1">
          <mxGeometry y="40" width="220" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="imanageableMethods" value="+ add(item: T): boolean&#xa;+ update(item: T): boolean&#xa;+ delete(id: String): boolean&#xa;+ getById(id: String): T&#xa;+ getAll(): List&lt;T&gt;&#xa;+ count(): int&#xa;+ isEmpty(): boolean&#xa;+ clear(): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontStyle=2;" parent="imanageable" vertex="1">
          <mxGeometry y="48" width="220" height="102" as="geometry"/>
        </mxCell>
        
        <!-- ISearchable Interface -->
        <mxCell id="isearchable" value="&lt;&lt;interface&gt;&gt;&#xa;ISearchable&lt;T&gt;" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="340" y="60" width="250" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="isearchableLine" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="isearchable" vertex="1">
          <mxGeometry y="40" width="250" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="isearchableMethods" value="+ search(keyword: String): List&lt;T&gt;&#xa;+ filter(criteria: Map&lt;String, Object&gt;): List&lt;T&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontStyle=2;" parent="isearchable" vertex="1">
          <mxGeometry y="48" width="250" height="52" as="geometry"/>
        </mxCell>
        
        <!-- IStorable Interface -->
        <mxCell id="istorable" value="&lt;&lt;interface&gt;&gt;&#xa;IStorable" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="650" y="60" width="200" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="istorableLine" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="istorable" vertex="1">
          <mxGeometry y="40" width="200" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="istorableMethods" value="+ save(data: List&lt;T&gt;): boolean&#xa;+ load(): List&lt;T&gt;&#xa;+ getFilePath(): String&#xa;+ exists(): boolean&#xa;+ delete(): boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontStyle=2;" parent="istorable" vertex="1">
          <mxGeometry y="48" width="200" height="82" as="geometry"/>
        </mxCell>
        
        <!-- RoomManager (Control) -->
        <mxCell id="roomManager" value="«control»&#xa;RoomManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="40" y="320" width="220" height="170" as="geometry"/>
        </mxCell>
        <mxCell id="roomManagerAttr" value="- roomMap: Map&lt;String, Room&gt;&#xa;- instance: RoomManager «static»" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="roomManager" vertex="1">
          <mxGeometry y="40" width="220" height="36" as="geometry"/>
        </mxCell>
        <mxCell id="roomManagerLine" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="roomManager" vertex="1">
          <mxGeometry y="76" width="220" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="roomManagerMethods" value="+ getInstance(): RoomManager&#xa;+ add(room: Room): boolean&#xa;+ findAvailableRooms(): List&lt;Room&gt;&#xa;+ loadRooms(rooms: List): void&#xa;+ getStatistics(): Map" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="roomManager" vertex="1">
          <mxGeometry y="84" width="220" height="86" as="geometry"/>
        </mxCell>
        
        <!-- CustomerManager (Control) -->
        <mxCell id="customerManager" value="«control»&#xa;CustomerManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="290" y="320" width="220" height="150" as="geometry"/>
        </mxCell>
        <mxCell id="customerManagerAttr" value="- customers: List&lt;Customer&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="customerManager" vertex="1">
          <mxGeometry y="40" width="220" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="customerManagerLine" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="customerManager" vertex="1">
          <mxGeometry y="66" width="220" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="customerManagerMethods" value="+ add, update, delete, getAll...&#xa;+ search(keyword): List&lt;Customer&gt;&#xa;+ filter(criteria): List&lt;Customer&gt;&#xa;+ loadCustomers(list): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="customerManager" vertex="1">
          <mxGeometry y="74" width="220" height="76" as="geometry"/>
        </mxCell>
        
        <!-- BookingManager (Control) -->
        <mxCell id="bookingManager" value="«control»&#xa;BookingManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="540" y="320" width="230" height="150" as="geometry"/>
        </mxCell>
        <mxCell id="bookingManagerAttr" value="- bookings: List&lt;Booking&gt;&#xa;- roomManager: RoomManager" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="bookingManager" vertex="1">
          <mxGeometry y="40" width="230" height="36" as="geometry"/>
        </mxCell>
        <mxCell id="bookingManagerLine" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="bookingManager" vertex="1">
          <mxGeometry y="76" width="230" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="bookingManagerMethods" value="+ add, update, delete, getAll...&#xa;+ search, filter...&#xa;+ loadBookings(list): void&#xa;+ getTotalRevenue(): double" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="bookingManager" vertex="1">
          <mxGeometry y="84" width="230" height="66" as="geometry"/>
        </mxCell>
        
        <!-- InvoiceManager (Control) -->
        <mxCell id="invoiceManager" value="«control»&#xa;InvoiceManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="800" y="320" width="220" height="150" as="geometry"/>
        </mxCell>
        <mxCell id="invoiceManagerAttr" value="- invoices: List&lt;Invoice&gt;&#xa;- DEFAULT_TAX_RATE: double" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="invoiceManager" vertex="1">
          <mxGeometry y="40" width="220" height="36" as="geometry"/>
        </mxCell>
        <mxCell id="invoiceManagerLine" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="invoiceManager" vertex="1">
          <mxGeometry y="76" width="220" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="invoiceManagerMethods" value="+ add, update, delete, getAll...&#xa;+ createInvoiceFromBooking(): Invoice&#xa;+ loadInvoices(list): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="invoiceManager" vertex="1">
          <mxGeometry y="84" width="220" height="66" as="geometry"/>
        </mxCell>
        
        <!-- DataStorage (Entity) - Pure storage, no manager references -->
        <mxCell id="dataStorage" value="«entity»&#xa;DataStorage" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="380" y="560" width="280" height="180" as="geometry"/>
        </mxCell>
        <mxCell id="dataStorageAttr" value="- dataDirectory: String&#xa;- gson: Gson&#xa;- ROOMS_FILE: String&#xa;- CUSTOMERS_FILE: String&#xa;- BOOKINGS_FILE: String&#xa;- INVOICES_FILE: String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="dataStorage" vertex="1">
          <mxGeometry y="40" width="280" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="dataStorageLine" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="dataStorage" vertex="1">
          <mxGeometry y="130" width="280" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="dataStorageMethods" value="+ loadRooms(): List&lt;Room&gt;&#xa;+ saveRooms(List&lt;Room&gt;): void&#xa;+ loadCustomers/saveCustomers()&#xa;+ loadBookings/saveBookings()..." style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" parent="dataStorage" vertex="1">
          <mxGeometry y="138" width="280" height="42" as="geometry"/>
        </mxCell>
        
        <!-- Implements arrows -->
        <mxCell id="impl1" style="endArrow=block;endFill=0;dashed=1;html=1;strokeWidth=2;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="roomManager" target="imanageable" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="impl1b" style="endArrow=block;endFill=0;dashed=1;html=1;strokeWidth=2;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" parent="1" source="roomManager" target="isearchable" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="impl2" style="endArrow=block;endFill=0;dashed=1;html=1;strokeWidth=2;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="customerManager" target="imanageable" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="impl3" style="endArrow=block;endFill=0;dashed=1;html=1;strokeWidth=2;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="customerManager" target="isearchable" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="impl4" style="endArrow=block;endFill=0;dashed=1;html=1;strokeWidth=2;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="bookingManager" target="imanageable" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="598" y="280"/>
              <mxPoint x="300" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="impl5" style="endArrow=block;endFill=0;dashed=1;html=1;strokeWidth=2;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;" parent="1" source="bookingManager" target="isearchable" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="impl6" style="endArrow=block;endFill=0;dashed=1;html=1;strokeWidth=2;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="invoiceManager" target="imanageable" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="910" y="260"/>
              <mxPoint x="300" y="260"/>
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- Dependency: Managers USE DataStorage (CORRECT DIRECTION) -->
        <mxCell id="dep1" value="«uses»" style="endArrow=open;endFill=0;dashed=1;html=1;strokeWidth=1.5;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=#ffffff;" parent="1" source="roomManager" target="dataStorage" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="150" y="520"/>
              <mxPoint x="450" y="520"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="dep2" value="«uses»" style="endArrow=open;endFill=0;dashed=1;html=1;strokeWidth=1.5;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.4;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=#ffffff;" parent="1" source="customerManager" target="dataStorage" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="dep3" value="«uses»" style="endArrow=open;endFill=0;dashed=1;html=1;strokeWidth=1.5;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.6;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=#ffffff;" parent="1" source="bookingManager" target="dataStorage" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="dep4" value="«uses»" style="endArrow=open;endFill=0;dashed=1;html=1;strokeWidth=1.5;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=#ffffff;" parent="1" source="invoiceManager" target="dataStorage" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="910" y="520"/>
              <mxPoint x="590" y="520"/>
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- Note -->
        <mxCell id="note" value="- - - ▷ : implements (triển khai interface)&#xa;- - - ▷ : uses (phụ thuộc/dependency)&#xa;&#xa;BCE Pattern:&#xa;• Control (cam): Manager classes&#xa;• Entity (xanh lá): DataStorage&#xa;&#xa;Manager → DataStorage (đúng chiều)" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#ffffc0;strokeColor=#ff9900;fontSize=10;align=left;spacingLeft=5;" parent="1" vertex="1">
          <mxGeometry x="900" y="60" width="220" height="130" as="geometry"/>
        </mxCell>
        
        <!-- Singleton Note -->
        <mxCell id="noteSingleton" value="«Singleton Pattern»&#xa;RoomManager.getInstance()" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#f8cecc;strokeColor=#b85450;fontSize=9;align=left;spacingLeft=5;" parent="1" vertex="1">
          <mxGeometry x="40" y="500" width="150" height="40" as="geometry"/>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
